(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97830,e=>{e.v({chainIcons:"Analysis-module__4B3M5a__chainIcons",chart:"Analysis-module__4B3M5a__chart",chartHeader:"Analysis-module__4B3M5a__chartHeader",counterparties:"Analysis-module__4B3M5a__counterparties",counterpartiesChain:"Analysis-module__4B3M5a__counterpartiesChain",counterpartiesContainer:"Analysis-module__4B3M5a__counterpartiesContainer",counterpartiesCustomTime:"Analysis-module__4B3M5a__counterpartiesCustomTime",counterpartiesFlow:"Analysis-module__4B3M5a__counterpartiesFlow",counterpartiesFlowItem:"Analysis-module__4B3M5a__counterpartiesFlowItem",counterpartiesHeader:"Analysis-module__4B3M5a__counterpartiesHeader",counterpartiesTime:"Analysis-module__4B3M5a__counterpartiesTime",counterpartiesTimeItem:"Analysis-module__4B3M5a__counterpartiesTimeItem",counterpartiesTokenText:"Analysis-module__4B3M5a__counterpartiesTokenText",counterpartiesTokens:"Analysis-module__4B3M5a__counterpartiesTokens",counterparty:"Analysis-module__4B3M5a__counterparty",counterpartyBubbles:"Analysis-module__4B3M5a__counterpartyBubbles",counterpartyRowContainer:"Analysis-module__4B3M5a__counterpartyRowContainer",counterpartyRowHover:"Analysis-module__4B3M5a__counterpartyRowHover",customCounterpartiesHeader:"Analysis-module__4B3M5a__customCounterpartiesHeader",dateInputField:"Analysis-module__4B3M5a__dateInputField",dateRangeDiv:"Analysis-module__4B3M5a__dateRangeDiv",dateRangeLabel:"Analysis-module__4B3M5a__dateRangeLabel",depositChart:"Analysis-module__4B3M5a__depositChart",depositChartArea:"Analysis-module__4B3M5a__depositChartArea",depositPieArea:"Analysis-module__4B3M5a__depositPieArea",desktopHeader:"Analysis-module__4B3M5a__desktopHeader",entityLink:"Analysis-module__4B3M5a__entityLink",entityName:"Analysis-module__4B3M5a__entityName",exchangeColor:"Analysis-module__4B3M5a__exchangeColor",exchangeColumn:"Analysis-module__4B3M5a__exchangeColumn",exchangeContainer:"Analysis-module__4B3M5a__exchangeContainer",exchangeName:"Analysis-module__4B3M5a__exchangeName",exchangeOuterContainer:"Analysis-module__4B3M5a__exchangeOuterContainer",filterIcon:"Analysis-module__4B3M5a__filterIcon",fullHeight:"Analysis-module__4B3M5a__fullHeight",fullWidth:"Analysis-module__4B3M5a__fullWidth",graph:"Analysis-module__4B3M5a__graph",groupButton:"Analysis-module__4B3M5a__groupButton",groupByContainer:"Analysis-module__4B3M5a__groupByContainer",header:"Analysis-module__4B3M5a__header",headerText:"Analysis-module__4B3M5a__headerText",highlightKids:"Analysis-module__4B3M5a__highlightKids",mobileHeader:"Analysis-module__4B3M5a__mobileHeader",ownerToggle:"Analysis-module__4B3M5a__ownerToggle",ownerTogglePopup:"Analysis-module__4B3M5a__ownerTogglePopup",paginatorRow:"Analysis-module__4B3M5a__paginatorRow",pie:"Analysis-module__4B3M5a__pie",pieLegend:"Analysis-module__4B3M5a__pieLegend",pieLegendTitle:"Analysis-module__4B3M5a__pieLegendTitle",pieSection:"Analysis-module__4B3M5a__pieSection",selectedItem:"Analysis-module__4B3M5a__selectedItem",tx:"Analysis-module__4B3M5a__tx",valueColumn:"Analysis-module__4B3M5a__valueColumn",withdrawalChart:"Analysis-module__4B3M5a__withdrawalChart",withdrawalChartArea:"Analysis-module__4B3M5a__withdrawalChartArea",withdrawalPieArea:"Analysis-module__4B3M5a__withdrawalPieArea"})},39967,e=>{e.v({cell:"EntityPredictions-module__57xukG__cell",countInfo:"EntityPredictions-module__57xukG__countInfo",dataContainer:"EntityPredictions-module__57xukG__dataContainer",desktopHeader:"EntityPredictions-module__57xukG__desktopHeader",emptyState:"EntityPredictions-module__57xukG__emptyState",fullHeight:"EntityPredictions-module__57xukG__fullHeight",header:"EntityPredictions-module__57xukG__header",loadingIndicator:"EntityPredictions-module__57xukG__loadingIndicator",loadingMore:"EntityPredictions-module__57xukG__loadingMore",mobileHeader:"EntityPredictions-module__57xukG__mobileHeader",paginatorContainer:"EntityPredictions-module__57xukG__paginatorContainer",paginatorRow:"EntityPredictions-module__57xukG__paginatorRow",predictions:"EntityPredictions-module__57xukG__predictions",row:"EntityPredictions-module__57xukG__row",rowEven:"EntityPredictions-module__57xukG__rowEven",valueCell:"EntityPredictions-module__57xukG__valueCell",wrapper:"EntityPredictions-module__57xukG__wrapper"})},87873,e=>{"use strict";var t=e.i(91398),a=e.i(40104),s=e.i(46304),i=e.i(97830),r=e.i(75351),l=e.i(91788),n=e.i(244),d=e.i(65749),o=e.i(86536),c=e.i(23451),u=e.i(99560),m=e.i(28685),h=e.i(42507),_=e.i(16241),p=e.i(93678),f=e.i(30841),x=e.i(4248),g=e.i(7031),y=e.i(12144),v=e.i(58878),j=e.i(99735),w=e.i(94193),C=e.i(25527),N=e.i(6688),A=e.i(7113),T=e.i(74826),S=e.i(54590),D=e.i(88308);e.i(47620);var M=e.i(71179),E=e.i(40003),I=e.i(59165),B=e.i(39967);let k=({entityID:e})=>{let{t:a}=(0,M.useTranslation)(),[i,r]=(0,l.useState)([]),[n,d]=(0,l.useState)(0),[o,c]=(0,l.useState)(!1),u=(0,l.useRef)(null),m=(0,l.useRef)(null),_=h.useApi.intelligence.entityPredictions(e),x=_.data||[],g=h.useApi.intelligence.entity({id:e,name:""});(0,l.useEffect)(()=>{r([]),d(0),c(!1)},[e]),(0,l.useEffect)(()=>{x.length>0&&0===i.length&&(r(x.slice(0,16)),d(16))},[x]);let y=(0,l.useCallback)(()=>{o||n>=x.length||(c(!0),setTimeout(()=>{let e=x.slice(n,n+16);r(t=>[...t,...e]),d(e=>e+16),c(!1)},800))},[n,x,o]);if((0,l.useEffect)(()=>(u.current&&u.current.disconnect(),u.current=new IntersectionObserver(e=>{e[0].isIntersecting&&!o&&n<x.length&&y()},{rootMargin:"200px"}),m.current&&u.current.observe(m.current),()=>{u.current&&u.current.disconnect()}),[y,o,n,x.length]),_.isFetching)return(0,t.jsx)("div",{className:"fill",children:(0,t.jsx)(j.Logo,{of:"loadingIcon",maxHeight:60})});let v=n<x.length;return(0,t.jsx)(f.ErrorWrapper,{loading:!1,error:_.error,children:(0,t.jsx)("div",{className:B.default.wrapper,children:0===x.length?(0,t.jsx)("div",{className:B.default.emptyState,children:a("No predicted addresses available for this entity")}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:B.default.predictions,children:[(0,t.jsx)("div",{className:B.default.header,children:(0,t.jsx)("div",{children:a("ADDRESS")})}),(0,t.jsx)("div",{className:`${B.default.header} ${B.default.fullHeight}`,children:(0,t.jsx)("div",{children:a("VALUE")})})]}),(0,t.jsxs)("div",{className:B.default.dataContainer,children:[i.map((e,a)=>(0,t.jsxs)("div",{className:`${B.default.row} ${a%2==0?B.default.rowEven:""}`,style:{gridTemplateColumns:"5fr 1fr"},onClick:()=>{window.location.href=`/explorer/address/${e.address}`},children:[(0,t.jsx)("div",{className:B.default.cell,children:(0,t.jsx)(p.Address,{address:{address:e.address,chain:e.chain,predictedEntity:g.data}})}),(0,t.jsxs)("div",{className:B.default.valueCell,children:["$",(0,t.jsx)(s.default,{value:e.usdBalance})]})]},`${e.address}-${a}`)),v&&(0,t.jsx)("div",{ref:m,className:B.default.loadingMore,children:o&&(0,t.jsx)("div",{className:B.default.loadingIndicator,children:(0,t.jsx)(j.Logo,{of:"loadingIcon",maxHeight:30})})})]}),(0,t.jsxs)("div",{className:B.default.countInfo,children:[a("Showing")," ",i.length," ",a("of")," ",x.length," ",a("predictions")]})]})})})};var b=e.i(65992);let U=(e,t)=>(0,v.cssVar)(`chart-${e}`,t),L=e=>`${e.getMonth()+1}/${e.getDate()}/${e.getFullYear()}`,F=(e,t)=>{if(0===Object.keys(e).length)return[];let a=e[Object.keys(e)[0]].length;if(0===a||!t)return[];let s=Math.round(t.from),i=Math.min(Math.round(t.to),a-1);if(s<0||s>=a||i>=a)return[];let r={};return Object.keys(e).forEach(t=>{r[t]={depositedUSD:e[t][i].depositedUSD-(0===s?0:e[t][s].depositedUSD),withdrawnUSD:e[t][i].withdrawnUSD-(0===s?0:e[t][s].withdrawnUSD),exchangeName:e[t][s].exchangeName}}),Object.keys(r).map(e=>({exchangeID:e,exchangeName:r[e].exchangeName,depositedUSD:r[e].depositedUSD,withdrawnUSD:r[e].withdrawnUSD})).sort((e,t)=>t.depositedUSD+t.withdrawnUSD-(e.depositedUSD+e.withdrawnUSD))},H=({query:e})=>{let{t:a}=(0,M.useTranslation)(),{chains:s}=(0,u.useChains)(),n=h.useApi.volume(e),d=(0,l.useMemo)(()=>(0,_.mergeChainMap)(n.data,s,(e,t)=>e.time===t.time,(e,t)=>{var a,s;let i;return{...e,volumes:(a=e.volumes,s=t.volumes,i={},a.forEach(e=>i[e.exchangeID]={...e}),s.forEach(e=>{e.exchangeID in i?(i[e.exchangeID].depositedUSD+=e.depositedUSD,i[e.exchangeID].withdrawnUSD+=e.withdrawnUSD):i[e.exchangeID]={...e}}),Object.values(i))}},(e,t)=>e.time<t.time?-1:1),[n.data,s]),o=(0,l.useMemo)(()=>(e=>{if(0===e.length)return{};let t={};e.forEach(e=>{e.volumes.forEach(e=>{t[e.exchangeID]=e.exchangeName})});let a={};return Object.keys(t).forEach(e=>a[e]=[]),e.forEach((s,i)=>{0===i?Object.keys(t).forEach(e=>{a[e].push({time:s.time,exchangeName:t[e],depositedUSD:0,withdrawnUSD:0})}):(Object.keys(a).forEach(e=>{a[e].push({time:s.time,exchangeName:t[e],depositedUSD:a[e][i-1].depositedUSD,withdrawnUSD:a[e][i-1].withdrawnUSD})}),e[i-1].volumes.forEach(e=>{a[e.exchangeID][i].depositedUSD+=e.depositedUSD,a[e.exchangeID][i].withdrawnUSD+=e.withdrawnUSD}))}),a})(d),[d]),c=(0,l.useMemo)(()=>F(o,{from:0,to:d.length-1}),[o]),m=(0,l.useMemo)(()=>{let e;return e={},c.slice(0,8).forEach(t=>{e[t.exchangeID]=o[t.exchangeID]}),e},[o,c,8]),[p,x]=(0,l.useState)(),g=(0,l.useMemo)(()=>F(m,p),[o,p]),y=(0,v.useLightweightChart)({localization:{timeFormatter:v.timeFormatter},crosshair:{horzLine:{labelBackgroundColor:"rgb(104, 104, 104)"},vertLine:{labelBackgroundColor:"rgb(104, 104, 104)"}}}),w=(0,v.useLightweightChart)({localization:{timeFormatter:v.timeFormatter},crosshair:{horzLine:{labelBackgroundColor:"rgb(104, 104, 104)"},vertLine:{labelBackgroundColor:"rgb(104, 104, 104)"}}});(0,l.useEffect)(()=>{d.length&&x({from:0,to:d.length-1})},[d]);let E=e=>{let t=d.length;e&&d.length&&e.from>=0&&e.from<t&&e.to<t&&x(e)};(0,l.useEffect)(()=>{y.chart?.timeScale()&&w.chart?.timeScale()&&p&&(y.chart.timeScale().setVisibleLogicalRange(p),w.chart.timeScale().setVisibleLogicalRange(p))},[y.chart,w.chart,p]),(0,l.useEffect)(()=>{let e=Object.keys(m).map((e,t)=>{let a=y.chart?.addAreaSeries({lineColor:U(t,1),topColor:U(t,.4),bottomColor:U(t,.01),priceLineVisible:!1,priceFormat:{type:"custom",formatter:v.priceFormatter},lastValueVisible:!1,lineWidth:1});return a?.setData(m[e].map(e=>{let t=new Date(e.time);return{time:{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()},value:e.withdrawnUSD}})),a});return y.chart?.timeScale().subscribeVisibleLogicalRangeChange(E),()=>{y.chart?.timeScale().unsubscribeVisibleLogicalRangeChange(E),e.forEach(e=>e&&y.chart?.removeSeries(e))}},[y.chart,m]),(0,l.useEffect)(()=>{let e=Object.keys(m).map((e,t)=>{let a=w.chart?.addAreaSeries({lineColor:U(t,1),topColor:U(t,.4),bottomColor:U(t,.01),priceLineVisible:!1,priceFormat:{type:"custom",formatter:v.priceFormatter},lastValueVisible:!1,lineWidth:1});return a?.setData(m[e].map(e=>{let t=new Date(e.time);return{time:{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()},value:e.depositedUSD}})),a});return w.chart?.timeScale().subscribeVisibleLogicalRangeChange(E),()=>{w.chart?.timeScale().unsubscribeVisibleLogicalRangeChange(E),e.forEach(e=>e&&w.chart?.removeSeries(e))}},[w.chart,m]);let I=p&&d.length>p.to?new Date(d[Math.floor(p.from)].time):void 0,B=p&&d.length>p.to?new Date(d[Math.floor(p.to)].time):void 0,k=I&&B?Math.round((B.getTime()-I.getTime())/864e5):void 0,[b,H]=(0,l.useState)({from:I,to:B});(0,l.useEffect)(()=>{if(b&&b.from&&b.to){let e=b.from.getTime(),t=b.to.getTime(),a=d.findIndex(t=>new Date(t.time).getTime()>=e),s=d.findIndex(e=>new Date(e.time).getTime()>=t);s>=d.length&&(s=d.length-1),s<0&&(s=d.length-1),a<0&&(a=0),x({from:a,to:s})}},[b]);let[R,G]=(0,l.useState)(!1),{x:O,y:$,reference:V,floating:Y,strategy:W,refs:K}=(0,T.useFloating)({placement:"bottom",open:R,middleware:[(0,A.offset)(5),(0,A.flip)(),(0,A.shift)({padding:5})]});return((0,S.useOnClickOutside)(K.floating,()=>{G(!1)}),(0,D.useKey)("Escape",()=>G(!1)),n.isFetching)?(0,t.jsx)("div",{className:"fill",children:(0,t.jsx)(j.Logo,{of:"loadingIcon",maxHeight:60})}):(0,t.jsx)(f.ErrorHandler,{error:n.error,children:()=>(0,t.jsxs)("div",{className:i.default.exchangeOuterContainer,children:[(0,t.jsxs)("div",{className:i.default.dateRangeDiv,children:[(0,t.jsx)(C.IoFilterSharp,{className:i.default.filterIcon,onMouseDown:e=>{G(!R),e.stopPropagation()}}),(0,t.jsx)("div",{className:r.default.floatRef,ref:V,children:(0,t.jsx)(T.FloatingPortal,{children:R&&(0,t.jsx)("div",{className:r.default.popupContainer,ref:Y,style:{position:W,left:O||0,top:$||0},children:(0,t.jsx)(N.DatePicker,{initialSelection:{from:void 0,to:void 0},onApply:e=>{H(e),G(!1)},applyEveryChange:!1,beginClearing:"to"})})})}),I&&B&&(0,t.jsxs)("span",{children:[L(I)," - ",L(B)]})," ",k&&(0,t.jsxs)("span",{children:["(",k," ",a("DAYS"),")"]})]}),(0,t.jsxs)("div",{className:i.default.exchangeContainer,children:[(0,t.jsxs)("div",{className:i.default.depositChartArea,children:[(0,t.jsx)("div",{className:i.default.chartHeader,children:a("DEPOSITS")}),(0,t.jsx)("div",{className:i.default.chart,ref:w.chartRef})]}),(0,t.jsxs)("div",{className:i.default.withdrawalChartArea,children:[(0,t.jsx)("div",{className:i.default.chartHeader,children:a("WITHDRAWALS")}),(0,t.jsx)("div",{className:i.default.chart,ref:y.chartRef})]}),p&&d.length>p.to&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P,{type:"deposit",volumesForRange:g,volumesTotal:c.slice(0,8)},"deposit"),(0,t.jsx)(P,{type:"withdrawal",volumesForRange:g,volumesTotal:c.slice(0,8)},"withdrawal")]})]})]})})},P=({type:e,volumesForRange:a,volumesTotal:r})=>{let{t:n}=(0,M.useTranslation)(),d="deposit"===e?i.default.depositPieArea:i.default.withdrawalPieArea,o=a.sort((t,a)=>"deposit"===e?a.depositedUSD-t.depositedUSD:a.withdrawnUSD-t.withdrawnUSD),c=o.reduce((t,a)=>t+("deposit"===e?a.depositedUSD:a.withdrawnUSD),0);return(0,t.jsxs)("div",{className:`${d} ${i.default.pieSection}`,children:[(0,t.jsx)("div",{className:i.default.pie,children:(0,t.jsx)(R,{type:e,volumesForRange:a,volumesTotal:r})}),(0,t.jsxs)("div",{className:i.default.pieLegend,children:[(0,t.jsx)("span",{className:`${i.default.pieLegendTitle} ${i.default.exchangeColumn}`,children:n("EXCHANGE")}),(0,t.jsx)("span",{className:`${i.default.pieLegendTitle} ${i.default.valueColumn}`,children:n("VALUE")}),(0,t.jsx)("span",{className:i.default.exchangeColumn,children:n("Total")}),(0,t.jsxs)("div",{className:i.default.valueColumn,children:[(0,t.jsx)(s.default,{value:c,usd:!0,compact:!0})," ",(0,t.jsxs)("span",{children:["(",(0,t.jsx)(s.default,{value:100*c/c||0,decimals:0,suffix:"%"}),")"]})]}),o.map((a,n)=>{let d="deposit"===e?a.depositedUSD:a.withdrawnUSD;if(0===d)return null;let o=r.findIndex(e=>e.exchangeID===a.exchangeID);return(0,t.jsxs)(l.default.Fragment,{children:[(0,t.jsxs)("div",{className:i.default.exchangeColumn,children:[(0,t.jsx)("div",{className:i.default.exchangeColor,children:(0,t.jsx)("svg",{width:10,height:10,children:(0,t.jsx)("circle",{cx:5,cy:5,r:5,fill:U(o,.8)})})}),(0,t.jsx)("span",{className:i.default.exchangeName,children:a.exchangeName.toUpperCase()})]}),(0,t.jsxs)("div",{className:i.default.valueColumn,children:[(0,t.jsx)(s.default,{value:d,usd:!0,compact:!0})," ",(0,t.jsxs)("span",{children:["(",(0,t.jsx)(s.default,{value:100*d/c||0,decimals:0,suffix:"%"}),")"]})]})]},a.exchangeID)})]})]})},R=({type:e,volumesForRange:a,volumesTotal:s})=>{let r=a.reduce((e,t)=>e+t.depositedUSD,0),l=a.reduce((e,t)=>e+t.withdrawnUSD,0),u=a.sort((t,a)=>"deposit"===e?a.depositedUSD-t.depositedUSD:a.withdrawnUSD-t.withdrawnUSD),m="100%";return(0,t.jsx)(c.ResponsiveContainer,{height:"100%",width:"100%",className:i.default.graph,children:(0,t.jsx)(o.PieChart,{children:("deposit"===e?r:l)>0?(0,t.jsx)(d.Pie,{data:u,outerRadius:m,stroke:"none",dataKey:t=>"deposit"===e?t.depositedUSD:t.withdrawnUSD,children:u.map((e,a)=>{let i=s.findIndex(t=>t.exchangeID===e.exchangeID);return(0,t.jsx)(n.Cell,{fill:U(i,.8)},`cell-${a}`)})}):(0,t.jsx)(d.Pie,{data:[{i:1}],outerRadius:m,dataKey:"i",fill:"rgba(255,255,255,0.05)",stroke:"none"})})})},G=({filter:e,setFilter:a,filterTime:s,setFilterTime:r,setTxnFilter:l,query:n})=>(0,t.jsx)("div",{className:i.default.counterpartiesContainer,children:(0,t.jsx)(O,{filter:e,setFilter:a,setTxnFilter:l,filterTime:s,setFilterTime:r,query:n})}),O=({filter:e,setFilter:s,filterTime:r,setFilterTime:n,setTxnFilter:d,query:o})=>{let{t:c}=(0,M.useTranslation)(),u=h.useApi.user.get(),m=u.data?.preview??!1,p=["all","in","out"],x=["1h","24h","1w","1M","all"],v=h.useApi.counterparties({...e,last:void 0,...r,flow:"in",chains:e.chains}),w=h.useApi.counterparties({...e,last:void 0,...r,flow:"out",chains:e.chains}),C=(e,t)=>{let a=e.address.ownerAddress?.address,s=t.address.ownerAddress?.address,i=e.address.address,r=t.address.address;return!!a&&!!s&&a===s||!!a&&a===r||!!s&&s===i||i===r},N=(e,t)=>({...e,usd:e.usd+t.usd,transactionCount:e.transactionCount+t.transactionCount}),A=(e,t)=>t.usd-e.usd,T=(0,l.useMemo)(()=>(0,_.mergeChainMap)(v.data,e.chains,C,N,A),[v.data,e.chains]),S=(0,l.useMemo)(()=>(0,_.mergeChainMap)(w.data,e.chains,C,N,A),[w.data,e.chains]),D=(0,l.useMemo)(()=>{let e={},t=[];for(let a in T.forEach(t=>{e[t.address.ownerAddress?.address||t.address.address]=t}),S.forEach(t=>{let a=t.address.ownerAddress?.address||t.address.address;e[a]?e[a]={...e[a],usd:e[a].usd+t.usd,transactionCount:e[a].transactionCount+t.transactionCount}:e[a]=t}),e)t.push(e[a]);return t.sort((e,t)=>t.usd-e.usd)},[T,S]),I=(0,l.useMemo)(()=>{var t;let a=(t=o)?"address"in t?[t.address]:"entity"in t?[t.entity]:"combined"in t?t.combined:[]:[],s=e=>{let t=e.address.address,s=e.address.ownerAddress?.address;return a.includes(t)||void 0!==s&&a.includes(s)};switch(e.flow){case"all":return D.filter(e=>!s(e));case"in":return T.filter(e=>!s(e));case"out":return S.filter(e=>!s(e));default:return[]}},[D,T,S,e.flow,o]),B=[i.default.counterpartiesFlowItem,i.default.selectedItem].join(" "),k=[i.default.counterpartiesTimeItem,i.default.selectedItem].join(" "),[b,U]=(0,l.useState)(!0),L=(0,l.useMemo)(()=>b?V(I):I,[b,I]),[F,H]=(0,l.useState)(1),P=(0,l.useMemo)(()=>{let e=(F-1)*16;return L.slice(e,e+16)},[L,F,16]);return v.isFetching||w.isFetching?(0,t.jsx)("div",{className:"fill",children:(0,t.jsx)(j.Logo,{of:"loadingIcon",maxHeight:60})}):(0,t.jsx)(f.ErrorHandler,{error:v.error,children:()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:i.default.desktopHeader,children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:i.default.counterpartiesHeader,children:[(0,t.jsxs)("div",{className:i.default.counterpartiesFlow,children:[p.map(a=>(0,t.jsx)("p",{className:(e.flow??"all")===a?B:i.default.counterpartiesFlowItem,onClick:()=>s({...e,flow:a}),children:c(a.toUpperCase())},a)),(0,t.jsx)("div",{className:i.default.counterpartiesChain,children:(0,t.jsx)(g.SelectChain,{chains:e.chains,onChange:t=>s({...e,chains:t}),closeOnChange:!0})}),(0,t.jsxs)("div",{className:i.default.counterpartiesTokens,children:[(0,t.jsx)(y.FilterIcon,{type:"tokens",isActive:!!e.tokens,onChange:t=>{s({...e,tokens:e.tokens?[...e.tokens,t]:[t]})}}),(0,t.jsx)("span",{className:i.default.counterpartiesTokenText,children:c("TOKEN")})]}),m&&(0,t.jsxs)("div",{className:i.default.counterpartiesTokens,children:[(0,t.jsx)(y.FilterIcon,{type:"tags",isActive:!!e.tags,onChange:e=>{s(t=>{let a=t.tags?.some(t=>t.value===e.value)?t.tags:t.tags?[...t.tags,e]:[e];return{...t,tags:a}})}}),(0,t.jsx)("span",{className:i.default.counterpartiesTokenText,children:c("TAG")})]})]}),(0,t.jsxs)("div",{className:i.default.counterpartiesTime,children:[r&&n&&(0,t.jsx)("div",{className:i.default.counterpartiesCustomTime,children:(0,t.jsx)(E.FilterHeader,{filter:r,setFilter:n,type:"time",preventSortable:!0,hideIcon:!0,popupFilter:!0})}),x.map(a=>(0,t.jsx)("p",{className:(e.last??"all")===a?k:i.default.counterpartiesTimeItem,onClick:()=>s({...e,last:"all"===a?void 0:a}),children:c(a.toUpperCase())},a))]})]}),(0,t.jsx)("div",{className:i.default.customCounterpartiesHeader,children:(0,t.jsx)("div",{className:i.default.counterparties,children:(0,t.jsxs)("div",{className:i.default.header,children:[(0,t.jsxs)("div",{className:i.default.groupByContainer,children:[b?c("ENTITY"):c("ADDRESS"),(0,t.jsx)(a.default,{analyticsName:"Toggle View",format:"text",className:i.default.groupButton,onClick:()=>U(!b),children:b?c("[UNGROUP BY ENTITY]"):c("[GROUP BY ENTITY]")})]}),(0,t.jsx)("div",{className:i.default.headerText,children:c("CHAINS")}),(0,t.jsx)("div",{className:i.default.headerText,children:c("TX")}),(0,t.jsx)("div",{className:i.default.fullHeight,children:c("USD")})]})})}),(0,t.jsx)("div",{className:i.default.counterparties,children:L.map((e,a)=>(0,t.jsx)($,{counterparty:e,index:a,setTxnFilter:d},a))})]})}),(0,t.jsx)("div",{className:i.default.mobileHeader,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:i.default.paginatorRow,children:(0,t.jsx)("div",{className:i.default.paginatorContainer,children:L.length>1&&(0,t.jsx)(E.Paginator,{page:F,setPage:H,perPage:16,count:L.length})})}),(0,t.jsxs)("div",{className:i.default.counterpartiesHeader,children:[(0,t.jsxs)("div",{className:i.default.counterpartiesFlow,children:[p.map(a=>(0,t.jsx)("p",{className:(e.flow??"all")===a?B:i.default.counterpartiesFlowItem,onClick:()=>s({...e,flow:a}),children:c(a.toUpperCase())},a)),(0,t.jsx)("div",{className:i.default.counterpartiesChain,children:(0,t.jsx)(g.SelectChain,{chains:e.chains,onChange:t=>s({...e,chains:t}),closeOnChange:!0})}),(0,t.jsxs)("div",{className:i.default.counterpartiesTokens,children:[(0,t.jsx)(y.FilterIcon,{type:"tokens",isActive:!!e.tokens,onChange:t=>{"string"==typeof t&&s({...e,tokens:e.tokens?[...e.tokens,t]:[t]})}}),(0,t.jsx)("span",{className:i.default.counterpartiesTokenText,children:c("TOKEN")})]})]}),(0,t.jsxs)("div",{className:i.default.counterpartiesTime,children:[r&&n&&(0,t.jsx)("div",{className:i.default.counterpartiesCustomTime,children:(0,t.jsx)(E.FilterHeader,{filter:r,setFilter:n,type:"time",preventSortable:!0,hideIcon:!0})}),x.map(a=>(0,t.jsx)("p",{className:(e.last??"all")===a?k:i.default.counterpartiesTimeItem,onClick:()=>s({...e,last:"all"===a?void 0:a}),children:c(a.toUpperCase())},a))]})]}),(0,t.jsxs)("div",{className:i.default.counterparties,children:[(0,t.jsxs)("div",{className:i.default.header,children:[(0,t.jsxs)("div",{className:i.default.groupByContainer,children:[b?c("ENTITY"):c("ADDRESS"),(0,t.jsx)(a.default,{analyticsName:"Toggle View",format:"text",className:i.default.groupButton,onClick:()=>U(!b),children:b?c("[UNGROUP BY ENTITY]"):c("[GROUP BY ENTITY]")})]}),(0,t.jsx)("div",{className:i.default.tx,children:c("CHAINS")}),(0,t.jsx)("div",{className:i.default.tx,children:c("TX")}),(0,t.jsx)("div",{className:i.default.fullHeight,children:c("USD")})]}),P.map((e,a)=>(0,t.jsx)($,{counterparty:e,index:a,setTxnFilter:d},a))]})]})})]})})},$=({counterparty:e,index:a,setTxnFilter:r})=>(0,t.jsx)(l.default.Fragment,{children:(0,t.jsxs)("div",{className:`${i.default.counterpartyRowContainer} ${r&&i.default.counterpartyRowHover} ${a%2==0&&i.default.highlightKids}`,onClick:()=>{r&&("address"in e?r(t=>({...t,counterparties:[e.address.ownerAddress?.address||e.address.address]})):"entity"in e&&r(t=>({...t,counterparties:[e.entity.id]})))},children:[(0,t.jsx)("div",{className:i.default.counterparty,children:"address"in e?(0,t.jsx)(p.Address,{className:i.default.fullWidth,address:e.address.ownerAddress?.address?{...e.address.ownerAddress,userLabel:e.address.userLabel,userEntity:e.address.userEntity}:e.address,usePropAddress:!0}):(0,t.jsx)(p.Entity,{entity:e.entity})}),(0,t.jsx)("div",{className:i.default.chainIcons,children:e.chains.map(e=>(0,t.jsx)(x.WithIcon,{type:"chain",id:e},e))}),(0,t.jsx)("div",{className:i.default.tx,children:e.transactionCount}),(0,t.jsx)("div",{className:i.default.fullHeight,children:(0,t.jsx)(s.default,{compact:!0,value:e.usd,prefix:"$"})})]})},a),V=e=>{let t=[],a=[];for(let s of e){let{address:e}=s,i=e.userEntity||e.ownerAddress?.userEntity||e.arkhamEntity||e.ownerAddress?.arkhamEntity;i?a.push({...s,entity:i}):t.push(s)}let s=[];for(let e of a){let t=s.find(t=>t.entity.id===e.entity.id);t?(t.usd+=e.usd,t.transactionCount+=e.transactionCount,t.chains=[...t.chains,...e.chains],t.chains=t.chains.filter((e,t,a)=>a.indexOf(e)===t)):s.push({usd:e.usd,entity:e.entity,transactionCount:e.transactionCount,chains:e.chains})}return[...t,...s].sort((e,t)=>t.usd-e.usd)};e.s(["Analysis",0,({query:e,setTxnFilter:a,hideExchangeUsage:s})=>{let{t:r}=(0,M.useTranslation)(),{chains:n}=(0,u.useChains)(),d={id:"address"in e?e.address:"entity"in e?e.entity:"",type:"address"in e?"address":"entity",chains:n,last:"1w",flow:"all",limit:100},o={sortDir:"desc",sortKey:"time",limit:100,offset:0,flow:"all",timeLast:"7d"},[c,h]=(0,l.useState)(o),[_,p]=(0,l.useState)(d);(0,l.useEffect)(()=>{_.last||void 0===c.timeLast||h(e=>({...e,timeLast:void 0})),"1M"===_.last&&"30d"!==c.timeLast?h(e=>({...e,timeLast:"30d",timeGte:void 0,timeLte:void 0})):"1w"===_.last&&"7d"!==c.timeLast?h(e=>({...e,timeLast:"7d",timeGte:void 0,timeLte:void 0})):_.last&&"1M"!==_.last&&"1w"!==_.last&&c.timeLast!==_.last&&h(e=>({...e,timeLast:_.last,timeGte:void 0,timeLte:void 0}))},[_.last]),(0,l.useEffect)(()=>{"30d"===c.timeLast&&"1M"!==_.last?p(e=>({...e,last:"1M"})):"7d"===c.timeLast&&"1w"!==_.last?p(e=>({...e,last:"1w"})):"30d"!==c.timeLast&&"7d"!==c.timeLast&&c.timeLast!==_.last&&p(e=>({...e,last:c.timeLast})),(c.timeGte||c.timeLte)&&void 0!==_.last&&p(e=>({...e,last:""}))},[c.timeLast,c.timeGte,c.timeLte]),(0,l.useEffect)(()=>{p(d),h(o)},[e]),(0,l.useEffect)(()=>{p({..._,chains:n})},[n]);let f="entity"in e&&"okx"===e.entity,x=!s&&!f,g="entity"in e;return(0,t.jsxs)(w.Tabs,{defaultID:x?"exchange-usage":"counterparties",children:[x&&(0,t.jsxs)(w.Tab,{title:r("EXCHANGE USAGE"),ID:"exchange-usage",children:[(0,t.jsx)(H,{query:e}),(0,t.jsx)(b.Watermark,{size:"small",includeText:!0})]}),(0,t.jsxs)(w.Tab,{ID:"counterparties",title:r("TOP COUNTERPARTIES"),renderHidden:!1,children:[(0,t.jsxs)("div",{className:i.default.counterpartyBubbles,children:[c.timeGte&&(0,t.jsx)(m.FilteredField,{field:"timeGte",value:c.timeGte,remove:h?()=>h((0,I.remove)(c,"timeGte")):void 0},"timeGte"),c.timeLte&&(0,t.jsx)(m.FilteredField,{field:"timeLte",value:c.timeLte,remove:h?()=>h((0,I.remove)(c,"timeLte")):void 0},"timeLte"),c.timeLast&&(0,t.jsx)(m.FilteredField,{field:"timeLast",value:c.timeLast,remove:h?()=>h((0,I.remove)(c,"timeLast")):void 0},"timeLast"),(_.chains||_.tokens||_.tags)&&(0,t.jsx)(m.CounterpartyBubbles,{filter:_,setFilter:p})]}),(0,t.jsx)(G,{filter:_,setFilter:p,setTxnFilter:a,filterTime:c,setFilterTime:h,query:e}),(0,t.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, 3em)"},children:(0,t.jsx)(b.Watermark,{size:"small",includeText:!0})})]}),g&&(0,t.jsxs)(w.Tab,{ID:"entity-predictions",title:r("ENTITY PREDICTIONS"),renderHidden:!1,children:[(0,t.jsx)(k,{entityID:e.entity}),(0,t.jsx)(b.Watermark,{size:"small",includeText:!0})]})]})},"Counterparties",0,G],87873)}]);