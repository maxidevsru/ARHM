(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31e3,e=>{"use strict";var t=e.i(91398),a=e.i(91788),n=e.i(42507);let o=(0,a.createContext)({announcements:void 0,setAnnouncements:()=>{},updateSeen:()=>{}});e.s(["AnnouncementsProvider",0,({children:e})=>{let[i,s]=(0,a.useState)(void 0),l=n.useApi.announcements.updateSeen();return(0,t.jsx)(o.Provider,{value:{announcements:i,setAnnouncements:s,updateSeen:function(){l.mutate({}),s(void 0)}},children:e})},"useAnnouncements",0,()=>(0,a.useContext)(o)])},92896,e=>{e.v({desktopHeader:"Page-module__UwRb4a__desktopHeader",maintenanceMessage:"Page-module__UwRb4a__maintenanceMessage",maintenanceMessageIcon:"Page-module__UwRb4a__maintenanceMessageIcon",mobileHeader:"Page-module__UwRb4a__mobileHeader",modalBackground:"Page-module__UwRb4a__modalBackground",modalBox:"Page-module__UwRb4a__modalBox",page:"Page-module__UwRb4a__page",ssrPlaceholder:"Page-module__UwRb4a__ssrPlaceholder",tgMiniModalBox:"Page-module__UwRb4a__tgMiniModalBox",toast:"Page-module__UwRb4a__toast",toastBad:"Page-module__UwRb4a__toastBad",toastGood:"Page-module__UwRb4a__toastGood",verificationMessage:"Page-module__UwRb4a__verificationMessage",verificationModal:"Page-module__UwRb4a__verificationModal"})},23544,e=>{e.v({cookieBanner:"CookieBanner-module___9etpq__cookieBanner",cookieBannerAccept:"CookieBanner-module___9etpq__cookieBannerAccept",cookieBannerButtons:"CookieBanner-module___9etpq__cookieBannerButtons",cookieBannerInner:"CookieBanner-module___9etpq__cookieBannerInner",cookieBannerLeft:"CookieBanner-module___9etpq__cookieBannerLeft",cookieBannerReject:"CookieBanner-module___9etpq__cookieBannerReject",cookieBannerRight:"CookieBanner-module___9etpq__cookieBannerRight",cookieBannerSettings:"CookieBanner-module___9etpq__cookieBannerSettings",cookieBannerText:"CookieBanner-module___9etpq__cookieBannerText",cookieBannerTitle:"CookieBanner-module___9etpq__cookieBannerTitle",cookieMenuButtons:"CookieBanner-module___9etpq__cookieMenuButtons",cookieMenuContainer:"CookieBanner-module___9etpq__cookieMenuContainer",cookieMenuRejectAll:"CookieBanner-module___9etpq__cookieMenuRejectAll",cookieMenuSaveButton:"CookieBanner-module___9etpq__cookieMenuSaveButton",cookieMenuSection:"CookieBanner-module___9etpq__cookieMenuSection",cookieMenuSectionContent:"CookieBanner-module___9etpq__cookieMenuSectionContent",cookieMenuSectionRow:"CookieBanner-module___9etpq__cookieMenuSectionRow",cookieMenuSectionText:"CookieBanner-module___9etpq__cookieMenuSectionText",cookieMenuSectionTitle:"CookieBanner-module___9etpq__cookieMenuSectionTitle",cookieMenuToggle:"CookieBanner-module___9etpq__cookieMenuToggle",cookieMenuToggleThumb:"CookieBanner-module___9etpq__cookieMenuToggleThumb",on:"CookieBanner-module___9etpq__on",tosLink:"CookieBanner-module___9etpq__tosLink",tosPopupButton:"CookieBanner-module___9etpq__tosPopupButton",tosPopupContainer:"CookieBanner-module___9etpq__tosPopupContainer",tosPopupMessage:"CookieBanner-module___9etpq__tosPopupMessage"})},7653,e=>{e.v({announcementCard:"index-module__BvtYfG__announcementCard",announcementCircle:"index-module__BvtYfG__announcementCircle",announcementCircleInner:"index-module__BvtYfG__announcementCircleInner",announcementCircles:"index-module__BvtYfG__announcementCircles",announcementContainer:"index-module__BvtYfG__announcementContainer",announcementLink:"index-module__BvtYfG__announcementLink",banner:"index-module__BvtYfG__banner",bannerTitle:"index-module__BvtYfG__bannerTitle",category:"index-module__BvtYfG__category",closeAnnouncement:"index-module__BvtYfG__closeAnnouncement",content:"index-module__BvtYfG__content",contentMain:"index-module__BvtYfG__contentMain",contentTop:"index-module__BvtYfG__contentTop",description:"index-module__BvtYfG__description",readMoreLink:"index-module__BvtYfG__readMoreLink",title:"index-module__BvtYfG__title"})},12474,e=>{"use strict";var t=e.i(91398),a=e.i(80655),n=e.i(78495),o=e.i(92896),i=e.i(40104),s=e.i(91788),l=e.i(13314),r=e.i(42507);e.i(3634),e.i(47620);var d=e.i(71179),c=e.i(23544),u=e.i(59730),_=e.i(41158);let m=()=>{let{t:e}=(0,d.useTranslation)(),a=(0,u.useCookiePreference)(),{modals:n,setContext:o}=(0,l.usePageContext)();return(0,t.jsx)("div",{className:c.default.cookieBanner,children:(0,t.jsxs)("div",{className:c.default.cookieBannerInner,children:[(0,t.jsxs)("div",{className:c.default.cookieBannerLeft,children:[(0,t.jsx)("div",{className:c.default.cookieBannerTitle,children:e("cookie settings")}),(0,t.jsx)("div",{className:c.default.cookieBannerText,children:e("we use cookies to improve our product and your experience on our websites. you can opt out of cookies here, or in the settings tab.")})]}),(0,t.jsxs)("div",{className:c.default.cookieBannerRight,children:[(0,t.jsxs)("div",{className:c.default.cookieBannerButtons,children:[(0,t.jsx)("div",{className:c.default.cookieBannerAccept,onClick:()=>a.updatePreferences("accept"),children:e("allow all")}),(0,t.jsx)("div",{className:c.default.cookieBannerReject,onClick:()=>a.updatePreferences("reject"),children:e("reject all")})]}),(0,t.jsx)("div",{className:c.default.cookieBannerSettings,onClick:()=>o({modals:[...n,(0,t.jsx)(h,{})]}),children:e("custom preferences")})]})]})})},h=()=>{let{t:e}=(0,d.useTranslation)(),{setContext:a}=(0,l.usePageContext)(),n=(0,u.useCookiePreference)(),[o,i]=(0,s.useState)(n.acceptMarketing),[r,_]=(0,s.useState)(n.acceptAnalytics);return(0,t.jsxs)("div",{className:c.default.cookieMenuContainer,children:[(0,t.jsx)("div",{className:c.default.cookieMenuSection,children:(0,t.jsxs)("div",{className:c.default.cookieMenuSectionRow,children:[(0,t.jsxs)("div",{className:c.default.cookieMenuSectionContent,children:[(0,t.jsx)("div",{className:c.default.cookieMenuSectionTitle,children:e("marketing cookies")}),(0,t.jsx)("div",{className:c.default.cookieMenuSectionText,children:e("These are cookies that help us keep track of our advertising campaigns and their effectiveness. For example, they show us how many visitors come from Twitter or YouTube.")})]}),(0,t.jsx)("div",{className:`${c.default.cookieMenuToggle} ${o&&c.default.on}`,onClick:()=>i(!o),children:(0,t.jsx)("div",{className:c.default.cookieMenuToggleThumb})})]})}),(0,t.jsx)("div",{className:c.default.cookieMenuSection,children:(0,t.jsxs)("div",{className:c.default.cookieMenuSectionRow,children:[(0,t.jsxs)("div",{className:c.default.cookieMenuSectionContent,children:[(0,t.jsx)("div",{className:c.default.cookieMenuSectionTitle,children:e("analytics cookies")}),(0,t.jsx)("div",{className:c.default.cookieMenuSectionText,children:e("These cookies help us understand how people use the Arkham platform so we can improve it. They tell us things like which features are used the most and how people move around the site.")})]}),(0,t.jsx)("div",{className:`${c.default.cookieMenuToggle} ${r&&c.default.on}`,onClick:()=>_(!r),children:(0,t.jsx)("div",{className:c.default.cookieMenuToggleThumb})})]})}),(0,t.jsxs)("div",{className:c.default.cookieMenuButtons,children:[(0,t.jsx)("div",{className:c.default.cookieMenuRejectAll,onClick:()=>{n.updatePreferences("reject"),a({modals:[]})},children:e("reject all")}),(0,t.jsx)("div",{className:c.default.cookieMenuSaveButton,onClick:()=>{let e;return e="reject",void(o&&r?e="accept":o?e="accept-marketing":r&&(e="accept-analytics"),n.updatePreferences(e),a({modals:[]}))},children:e("save preferences")})]})]})},f=({close:e})=>{let{t:a}=(0,d.useTranslation)(),n=r.useApi.user.signTOS(()=>e());return(0,t.jsxs)("div",{className:c.default.tosPopupContainer,children:[(0,t.jsxs)("div",{className:c.default.tosPopupMessage,children:[a("our")," ",(0,t.jsx)(_.default,{href:"https://info.arkm.com/terms-of-service",target:"_blank",rel:"noreferrer",className:c.default.tosLink,children:a("terms of service")})," ",a("and")," ",(0,t.jsx)(_.default,{href:"https://info.arkm.com/privacy-policy",target:"_blank",rel:"noreferrer",className:c.default.tosLink,children:a("privacy policy")})," ",a("have been updated. by continuing to use the arkham platform you agree to the terms and conditions.")]}),(0,t.jsx)("div",{className:c.default.tosPopupButton,onClick:()=>n.mutate({}),children:a("agree and continue")})]})};var p=e.i(31e3),g=e.i(7653);let x=()=>{let{announcements:e,setAnnouncements:a,updateSeen:n}=(0,p.useAnnouncements)(),[o,i]=(0,s.useState)(void 0);if((0,s.useEffect)(()=>{e&&e.length>0&&i(e[0].id)},[e]),!e||0===e.length)return null;let l=t=>{if(!e)return;let o=e.filter(e=>e.id!==t);a(o),o.length>0?i(o[0].id):i(void 0),0===o.length&&n()};return(0,t.jsxs)("div",{onClick:()=>{o&&l(o)},className:g.default.announcementContainer,children:[(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),className:g.default.announcementCard,children:o&&e&&e.length>0&&(0,t.jsx)(k,{announcement:e.filter(e=>e.id===o)[0],handleClose:l},o)}),(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),className:g.default.announcementCircles,children:e.map((e,a)=>(0,t.jsx)("div",{onClick:()=>i(e.id),className:g.default.announcementCircle,style:{border:C(e.category).radio.border},children:(0,t.jsx)("div",{className:g.default.announcementCircleInner,style:{backgroundColor:e.id===o?C(e.category).radio.active:"transparent"}})},a))})]})},k=({announcement:e,handleClose:a})=>{let n=e.bannerName?`https://static.arkhamintelligence.com/announcements/banners/${e.bannerName}.png`:void 0,o=e.imageName?`https://static.arkhamintelligence.com/announcements/content/${e.imageName}.png`:void 0,i=new Date(e.startAt).toUTCString().toLocaleUpperCase().split(",")[1].split(" ").slice(1,-1),s=C(e.category);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:g.default.banner,style:{...s.banner},children:[(0,t.jsx)("div",{className:g.default.bannerTitle,children:e.bannerTitle}),e.bannerName&&(0,t.jsx)("img",{src:n,alt:n&&"banner image for "+e.title}),e.link&&(0,t.jsx)("a",{className:g.default.readMoreLink,style:{...s.link},href:e.link,target:"_blank",rel:"noopener noreferrer",children:e.linkLabel?.toUpperCase()||"READ FULL UPDATE"}),(0,t.jsx)("div",{onClick:()=>a(e.id),className:g.default.closeAnnouncement,children:"X"})]}),(0,t.jsxs)("div",{className:g.default.content,children:[(0,t.jsxs)("div",{className:g.default.contentTop,children:[(0,t.jsx)(v,{category:e.category}),(0,t.jsx)("span",{children:`${i[0]} ${i[1]}, ${i[2]}`})]}),(0,t.jsxs)("div",{className:g.default.contentMain,children:[(0,t.jsx)("div",{className:g.default.title,children:e.title}),(0,t.jsx)("div",{className:g.default.description,children:(0,t.jsx)("div",{className:g.default.description,children:e.description.split("|").map((e,a)=>{let n=e.split(/(\*\*.*?\*\*|\[.*?\]\(.*?\))/g).filter(Boolean).map((e,a)=>{if(e.startsWith("**")&&e.endsWith("**"))return(0,t.jsx)("strong",{children:e.slice(2,-2)},a);if(!(e.startsWith("[")&&e.includes("](")))return(0,t.jsx)("span",{children:e},a);{let[n,o]=e.slice(1).split("](");return(0,t.jsx)("a",{href:o.slice(0,-1),target:"_blank",rel:"noopener noreferrer",className:g.default.announcementLink,children:n},a)}});return(0,t.jsx)("p",{children:n},a)})})}),e.imageName&&(0,t.jsx)("img",{src:o,alt:o&&"content image for "+e.title})]})]})]})},v=({category:e})=>{let a=C(e).category;return(0,t.jsx)("div",{className:g.default.announcementCategory,children:(0,t.jsx)("div",{style:{backgroundColor:a.backgroundColor,color:a.color},className:g.default.category,children:e})})},C=e=>({category:{backgroundColor:"#0171d933",color:"var(--blue)"},link:{backgroundColor:"#0171d9"},banner:{},radio:{border:"solid #0171d9bd 1px",active:"#00aeff"}});var j=e.i(91502),M=e.i(86934),B=e.i(70676);let b=({user:e})=>{let{modals:a,setContext:n}=(0,l.usePageContext)();return(0,s.useEffect)(()=>{e&&!e.emailVerified&&n({modals:[...a,(0,t.jsx)(N,{})]})},[]),(0,t.jsx)(t.Fragment,{})},N=()=>{let{t:e}=(0,d.useTranslation)(),[a,n]=(0,s.useState)(!1),l=r.useApi.user.requestVerificationEmail();return(0,t.jsxs)("div",{className:o.default.verificationModal,children:[!a&&(0,t.jsx)("div",{className:o.default.verificationMessage,children:e("Please verify your email to continue to the Arkham platform.")}),a&&(0,t.jsx)("div",{className:o.default.verificationMessage,children:e("Verification email sent.")}),(0,t.jsx)(i.default,{analyticsName:"Verify Email",onClick:()=>{l.mutate({}),n(!0)},children:a?"Re-send Verification Email":"Send Verification Email"}),(0,t.jsx)("div",{children:"support@arkm.com"})]})};e.s(["default",0,({children:e,manualFooter:i,hideHeader:d})=>{let{context:c,setContext:_,Provider:h}=(0,l.usePageContextProvider)(),g=(0,u.useCookiePreference)(),k=r.useApi.announcements.readAll(),{announcements:v,setAnnouncements:C}=(0,p.useAnnouncements)(),{isTelegramEnvironment:N}=(0,j.useAppEnvironment)(),[w,E]=(0,s.useState)(!1),[T,P]=(0,s.useState)(!1);(0,s.useEffect)(()=>{P(!0)},[]),(0,s.useEffect)(()=>{k.data&&k.data.length>0&&C(k.data)},[k.data]),(0,s.useEffect)(()=>{c.toast&&setTimeout(()=>_({toast:null}),5e3)},[c.toast]),(0,s.useEffect)(()=>{(0,M.isTMA)()&&(0,M.postEvent)("web_app_toggle_orientation_lock",{locked:!0})},[]);let S=c.toast?"good"==c.toast.type?o.default.toastGood:o.default.toastBad:"",A=r.useApi.user.get(),y=null!=A.data&&!A.data.signedToSAt,[I,G]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!g.registeredPreference&&!y&&0===c.modals.length){let e=setTimeout(()=>{E(!0)},5e3);return()=>clearTimeout(e)}},[g.registeredPreference,y,c.modals.length]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(h,{value:{...c,setContext:_},children:[!T&&(0,t.jsxs)("div",{className:o.default.ssrPlaceholder,children:[(0,t.jsx)("h1",{children:"Intel Platform | Arkham"}),(0,t.jsx)("p",{children:"Arkham Intel is a blockchain analytics platform that deanonymizes the people and companies behind blockchain wallets & transactions"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{children:"Blockchain Analytics"}),(0,t.jsx)("p",{children:"Advanced tools for tracking and analyzing blockchain transactions"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{children:"Crypto Intelligence"}),(0,t.jsx)("p",{children:"Comprehensive insights into cryptocurrency markets and activities"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{children:"Wallet Tracking"}),(0,t.jsx)("p",{children:"Monitor and analyze wallet activities across multiple chains"})]})]})]}),A.data&&(0,t.jsx)(b,{user:A.data}),(0,t.jsxs)("div",{className:o.default.page,children:[v&&(0,t.jsx)(x,{}),!N&&!d&&(0,t.jsx)(B.default,{}),!N&&!d&&(0,t.jsx)(n.default,{}),e,!i&&(0,t.jsx)(a.default,{}),c.modals.length>0&&c.modals.map((e,a)=>(0,t.jsx)("div",{className:o.default.modalBackground,style:{zIndex:a+2},onClick:()=>_({modals:c.modals.slice(0,-1)}),children:(0,t.jsx)("div",{className:N?o.default.tgMiniModalBox:o.default.modalBox,onClick:e=>e.stopPropagation(),children:e},a)},a)),(0,t.jsx)("div",{className:o.default.toast+" "+S,style:{bottom:c.toast?0:-36},children:c.toast?c.toast.content:void 0}),w&&!g.registeredPreference&&!y&&0==c.modals.length&&(0,t.jsx)(m,{}),y&&!I&&(0,t.jsx)(f,{close:()=>G(!0)})]})]})})}],12474)},5134,e=>{e.v({markdown:"index-module__REFt4G__markdown",middle:"index-module__REFt4G__middle",pageContainer:"index-module__REFt4G__pageContainer",selected:"index-module__REFt4G__selected",unit:"index-module__REFt4G__unit"})},53673,e=>{e.v({container:"Sidebar-module__Iktr_q__container",deleteIcon:"Sidebar-module__Iktr_q__deleteIcon",editIcon:"Sidebar-module__Iktr_q__editIcon",label:"Sidebar-module__Iktr_q__label",newChatButton:"Sidebar-module__Iktr_q__newChatButton",optionContainer:"Sidebar-module__Iktr_q__optionContainer",optionIcons:"Sidebar-module__Iktr_q__optionIcons",selected:"Sidebar-module__Iktr_q__selected"})},34769,e=>{e.v({arkham:"Chat-module__EMYwhG__arkham",blinking:"Chat-module__EMYwhG__blinking",chatLabel:"Chat-module__EMYwhG__chatLabel",chatObjectContainer:"Chat-module__EMYwhG__chatObjectContainer",container:"Chat-module__EMYwhG__container",hide:"Chat-module__EMYwhG__hide",input:"Chat-module__EMYwhG__input",inputContainer:"Chat-module__EMYwhG__inputContainer",loadMoreButton:"Chat-module__EMYwhG__loadMoreButton",loadMoreContainer:"Chat-module__EMYwhG__loadMoreContainer",loadMoreContainerButton:"Chat-module__EMYwhG__loadMoreContainerButton",loadingEllipsis:"Chat-module__EMYwhG__loadingEllipsis",logo:"Chat-module__EMYwhG__logo",message:"Chat-module__EMYwhG__message",messageContainer:"Chat-module__EMYwhG__messageContainer",messagesContainer:"Chat-module__EMYwhG__messagesContainer",mobileHeaderMenuContainer:"Chat-module__EMYwhG__mobileHeaderMenuContainer",mobileMenuBar:"Chat-module__EMYwhG__mobileMenuBar",mobileMenuBarDropdown:"Chat-module__EMYwhG__mobileMenuBarDropdown",mobileMenuBarDropdownItem:"Chat-module__EMYwhG__mobileMenuBarDropdownItem",mobileMenuBarText:"Chat-module__EMYwhG__mobileMenuBarText",oracle:"Chat-module__EMYwhG__oracle",oracleChatIcon:"Chat-module__EMYwhG__oracleChatIcon",oracleMessageBackground:"Chat-module__EMYwhG__oracleMessageBackground",promptButton:"Chat-module__EMYwhG__promptButton",textarea:"Chat-module__EMYwhG__textarea",unitContainer:"Chat-module__EMYwhG__unitContainer",unitContainerWithHeight:"Chat-module__EMYwhG__unitContainerWithHeight",userIcon:"Chat-module__EMYwhG__userIcon",userMessageBackground:"Chat-module__EMYwhG__userMessageBackground"})},82746,e=>{"use strict";var t=e.i(91398),a=e.i(5134),n=e.i(91788),o=e.i(53673),i=e.i(75823),s=e.i(42507),l=e.i(65914),r=e.i(54590),d=e.i(88308);e.i(47620);var c=e.i(71179);let u=({selectedUUID:e,setSelectedUUID:a})=>{let{t:i}=(0,c.useTranslation)(),r=(0,l.useRouter)(),d=s.useApi.oracle.getAllChats().data||[],[u,m]=(0,n.useState)(void 0),h=d.sort((e,t)=>e.createdAt>t.createdAt?-1:1);return(0,t.jsxs)("div",{className:o.default.container,children:[(0,t.jsx)("div",{className:o.default.newChatButton,onClick:()=>{a(void 0),r.push("/oracle")},children:i("NEW CHAT")}),h.map(a=>(0,t.jsx)(_,{chat:a,selected:e===a.uuid,editingChatUUID:u,setEditingChatUUID:m},a.uuid))]})},_=({chat:e,selected:a,editingChatUUID:c,setEditingChatUUID:u})=>{let _=(0,n.useRef)(null),m=c===e.uuid,h=(0,l.useRouter)(),f=s.useApi.oracle.deleteChat(()=>{h.push("/oracle")}),p=s.useApi.oracle.updateChat(),g=t=>{t!==e.label&&p.mutate({chatUUID:e.uuid,label:t}),u(void 0)};return(0,r.useOnClickOutside)(_,()=>{m&&g(_.current?.value||"")}),(0,d.useKey)("Enter",()=>{m&&g(_.current?.value||"")}),(0,t.jsxs)("div",{className:`${o.default.optionContainer} ${a&&o.default.selected}`,onClick:()=>{h.push(`/oracle/${e.uuid}`),c&&!m&&u(void 0)},children:[(0,t.jsx)("input",{type:"text",disabled:!m,className:o.default.label,ref:_,defaultValue:e.label}),a&&(0,t.jsxs)("div",{className:o.default.optionIcons,children:[m?(0,t.jsx)("div",{onClick:e=>{e.stopPropagation(),u(void 0)},className:o.default.editIcon,children:(0,t.jsx)(i.FiCheck,{})}):(0,t.jsx)("div",{onClick:t=>{t.stopPropagation(),u(e.uuid),setTimeout(()=>_.current?.focus(),20)},className:o.default.editIcon,children:(0,t.jsx)(i.FiEdit,{})}),(0,t.jsx)("div",{onClick:t=>{t.stopPropagation(),f.mutate(e.uuid)},className:o.default.deleteIcon,children:(0,t.jsx)(i.FiTrash,{})})]})]})};var m=e.i(34769),h=e.i(40104),f=e.i(30841),p=e.i(7654),g=e.i(21628),x=e.i(40686),k=e.i(25527);let v=({selectedUUID:e,setSelectedUUID:a})=>{let{t:o}=(0,c.useTranslation)(),[i,l]=(0,n.useState)(null),[r,d]=(0,n.useState)([]),u=(0,n.useRef)(null),[_,h]=(0,n.useState)(!1),[p,g]=(0,n.useState)(6),[x,k]=(0,n.useState)(new Map),v=s.useApi.oracle.postMessage(e=>{d(e.messages),h(!1),g(p+1)}),M=s.useApi.oracle.createChat(e=>{l(e),a(e.uuid),h(!1)});(0,n.useEffect)(()=>{(v.error||M.error)&&h(!1)},[v.error,M.error]);let b=s.useApi.oracle.getChat(e??"");(0,n.useEffect)(()=>{b.data?.messages&&d(b.data.messages)},[b.data?.messages]),(0,n.useEffect)(()=>{u.current?.scrollTo(0,u.current.scrollHeight)},[r]),(0,n.useEffect)(()=>{g(6),e||d([]),k(new Map)},[e]),(0,n.useEffect)(()=>{b.data&&l(b.data)},[b.data?.uuid]);let N=r.length>0&&r[r.length-1].isAssistantMessage,w=r.slice(-p),E=p<r.length,T=o("O R A C L E");return(0,t.jsx)(f.ErrorWrapper,{error:b.error,loading:!1,children:(0,t.jsxs)("div",{className:m.default.container,children:[(0,t.jsx)(C,{create:M,currentChat:i,setSelectedUUID:a}),0===r.length&&(0,t.jsxs)("div",{className:m.default.logo,children:[(0,t.jsx)("div",{className:m.default.arkham,children:o("ARKHAM")}),(0,t.jsx)("div",{className:m.default.oracle,children:T.split("").map((e,a)=>(0,t.jsx)("div",{children:e},a))})]}),(0,t.jsxs)("div",{className:m.default.messagesContainer,ref:u,children:[E&&(0,t.jsx)("div",{onClick:()=>g(p+6),className:m.default.loadMoreContainer,children:(0,t.jsx)("div",{className:m.default.loadMoreContainerButton,children:o("LOAD MORE")})}),w.map((e,a)=>(0,t.jsx)(j,{message:e,unitConfigs:x.get(e.uuid),updateUnitConfig:(t,a)=>{var n;return n=e.uuid,void k(e=>{let o=new Map(e);return o.has(n)||o.set(n,new Map),o.get(n).set(t,a),o})}},a)),_&&!N&&(0,t.jsx)(j,{message:{message:"",isAssistantMessage:!0,uuid:"",chatUUID:"",createdAt:""},loadingMessage:!0},-1)]}),(0,t.jsx)(B,{submit:t=>{e?v.mutate({message:t,chatUUID:e}):M.mutate({label:"New Chat",message:t}),d([...r,{message:t,isAssistantMessage:!1,uuid:"",chatUUID:"",createdAt:""}]),g(p+1),h(!0)},loading:_})]})})},C=({create:e,currentChat:a,setSelectedUUID:o})=>{let{t:l}=(0,c.useTranslation)(),d=s.useApi.oracle.getAllChats().data||[],[u,_]=(0,n.useState)(!1),h=()=>_(!u),f=(0,n.useRef)(null);return(0,r.useOnClickOutside)(f,()=>_(!1)),(0,t.jsxs)("div",{className:m.default.mobileHeaderMenuContainer,children:[(0,t.jsxs)("div",{className:m.default.mobileMenuBar,onClick:h,ref:f,children:[(0,t.jsxs)("div",{className:m.default.mobileMenuBarText,children:[a?.label||l("NEW CHAT"),u?(0,t.jsx)(i.FiChevronUp,{}):(0,t.jsx)(i.FiChevronDown,{})]}),(0,t.jsx)("div",{className:`${m.default.mobileMenuBarDropdown} ${!u&&m.default.hide}`,children:d.map(e=>(0,t.jsx)("div",{className:m.default.mobileMenuBarDropdownItem,onClick:()=>{o(e.uuid),h()},children:e.label},e.uuid))})]}),(0,t.jsx)("div",{className:m.default.mobileCreateChatButton,onClick:()=>e.mutate({label:"New Chat",message:""}),children:(0,t.jsx)(k.IoAddCircleSharp,{color:"var(--off-white)",fontSize:"2em",className:m.default.mobileNewChat})})]})},j=({message:e,loadingMessage:a,unitConfigs:n,updateUnitConfig:o})=>(0,t.jsx)("div",{className:e.isAssistantMessage?m.default.oracleMessageBackground:m.default.userMessageBackground,children:(0,t.jsx)("div",{className:m.default.chatObjectContainer,children:(0,t.jsxs)("div",{className:m.default.messageContainer,children:[(0,t.jsx)("div",{className:m.default.chatIconContainer,children:e.isAssistantMessage?(0,t.jsx)("img",{className:m.default.oracleChatIcon,src:"https://static.arkhamintelligence.com/oracle/oracle_logo_1.svg"}):(0,t.jsx)("div",{className:m.default.userIcon,children:(0,t.jsx)(x.BsPersonCircle,{})})}),!e.isAssistantMessage&&(0,t.jsx)("div",{className:m.default.message,children:(0,t.jsx)(p.default,{children:e.message})}),a&&(0,t.jsxs)("div",{className:`${m.default.message} ${m.default.loadingEllipsis}`,children:[(0,t.jsx)("span",{children:"."}),(0,t.jsx)("span",{children:"."}),(0,t.jsx)("span",{children:"."})]}),e.isAssistantMessage&&!a&&(0,t.jsx)("div",{className:m.default.message,children:b(e.message).map((e,a)=>{if("string"==typeof e)return(0,t.jsx)(p.default,{children:e},a);{let i=n?.get(a);return(0,t.jsx)(M,{config:i||e,updateUnit:o?e=>o(a,e):void 0},a)}})})]})})}),M=({config:e,updateUnit:a})=>{let n=e.type;return(0,t.jsx)("div",{className:`${m.default.unitContainer} ${("chart"==n||"history"==n||"pie_chart"==n)&&m.default.unitContainerWithHeight}`,children:(0,t.jsx)(g.Component,{unit:{...e,id:"",width:4,height:4,top:0,left:0},updateUnit:e=>{if(a){let{id:t,width:n,height:o,top:i,left:s,...l}=e;a(l)}}})})},B=({submit:e,loading:a})=>{let{t:o}=(0,c.useTranslation)(),[i,s]=(0,n.useState)({text:"",rows:1,maxRows:5}),l=t=>{a||(e(t),s({...i,text:"",rows:1}))};return(0,t.jsx)("div",{className:m.default.chatObjectContainer,children:(0,t.jsxs)("div",{className:m.default.inputContainer,children:[(0,t.jsx)("textarea",{value:i.text,onChange:e=>{let t=e.target.rows;e.target.rows=1;let a=~~(e.target.scrollHeight/30);a===t&&(e.target.rows=a),a>=i.maxRows&&(e.target.rows=i.maxRows,e.target.scrollTop=e.target.scrollHeight),s({...i,text:e.target.value,rows:a<i.maxRows?a:i.maxRows})},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(l(i.text),e.preventDefault())},placeholder:o("SEARCH FOR BLOCKCHAIN INFORMATION")+"...",className:m.default.textarea,rows:i.rows}),(0,t.jsx)(h.default,{analyticsName:"Send Message",disabled:""===i.text,size:"custom",onClick:()=>l(i.text),className:m.default.promptButton,children:(0,t.jsx)(k.IoSend,{})})]})})},b=e=>{for(var t=[],a=[],n=0,o=0;o<e.length;o++)if("{"===e[o])1==++n&&t.push(o);else if("}"===e[o]&&(0==--n&&a.push(o),n<0))return[e];if(t.length!==a.length)return["I'm having trouble finding this unit. Please try again."];let i=t.map((t,n)=>e.slice(t,a[n]+1)),s=0,l=[];return i.forEach(t=>{let a=e.indexOf(t);a>s&&l.push(e.slice(s,a)),s=a+t.length;try{let e=JSON.parse(t);l.push(e)}catch(e){return["I'm having trouble finding this unit. Please try again."]}}),s<e.length&&l.push(e.slice(s)),l};e.s(["Oracle",0,({initialUUID:e})=>{let[o,i]=(0,n.useState)(void 0);return(0,n.useEffect)(()=>{e!==o&&i(e)},[e]),(0,t.jsxs)("div",{className:a.default.pageContainer,children:[(0,t.jsx)(u,{selectedUUID:o,setSelectedUUID:i}),(0,t.jsx)(v,{selectedUUID:o,setSelectedUUID:i})]})}],82746)},3564,e=>{"use strict";var t=e.i(91398),a=e.i(12474),n=e.i(82746),o=e.i(71138);e.s(["default",0,()=>(0,t.jsx)(o.RequireAuth,{children:(0,t.jsx)(a.default,{children:(0,t.jsx)(n.Oracle,{})})})])},46076,(e,t,a)=>{let n="/oracle";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(3564)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})},48761,e=>{e.v(t=>Promise.all(["static/chunks/0d73c18a7a56e48d.js"].map(t=>e.l(t))).then(()=>t(93594)))},28805,e=>{e.v(t=>Promise.all(["static/chunks/3dcc93bb4829c1ba.js"].map(t=>e.l(t))).then(()=>t(79466)))},92388,e=>{e.v(t=>Promise.all(["static/chunks/25de91c4b0c0d8c6.js"].map(t=>e.l(t))).then(()=>t(97539)))},55210,e=>{e.v(t=>Promise.all(["static/chunks/01a0f3d214b41d6f.js"].map(t=>e.l(t))).then(()=>t(90724)))},96713,e=>{e.v(t=>Promise.all(["static/chunks/23671120ce6d79de.js"].map(t=>e.l(t))).then(()=>t(89958)))},18728,e=>{e.v(t=>Promise.all(["static/chunks/286a5289ab84d58f.js"].map(t=>e.l(t))).then(()=>t(19013)))},91449,e=>{e.v(t=>Promise.all(["static/chunks/9d684f05f07d4e8b.js"].map(t=>e.l(t))).then(()=>t(65454)))},4507,e=>{e.v(e=>Promise.resolve().then(()=>e(99753)))},35716,e=>{e.v(t=>Promise.all(["static/chunks/6b6985be3f65004e.js","static/chunks/ee028e03e5d39163.js","static/chunks/66a1f108adf2750f.css"].map(t=>e.l(t))).then(()=>t(55527)))}]);